### Prototypeパターン

1. 利用シーン・メリット

Prototypeはあ以下のような場合に利用する。<br>
  - インスタンスの種類が多い場合（少しだけ異なるインスタンスを多数生成）<br>
  フィールドの値が違うだけのインスタンスは、Prototypeパターンで作成できる可能性がある。<br>

  - インスタンス生成が難しい場合<br>
  描画アプリケーションの例で言えば、ユーザーが作成した図形をコピーできる機能を作るとする。<br>
  その場合、ユーザーが作成した図形を新たに原型として登録すれば、簡単にコピーができる。<br>
  このように、元々はクローンだったインスタンスを原型のインスタンスとして再利用できるようにすることも、Prototyprパターンでは可能である。<br>


2. 注意点・問題点

cloneメソッドには1つ問題がある。<br>
必殺技あを表すクラスSpecialをSwordクラスのフィールドに追加した時、Swordクラスのフィールドに追加したとする。<br>
この時Swordクラスのcloneメソッドを呼び出しても、参照先が同じになってしまう。<br>

このようなコピーうを麻生コピー（シャローコピー）という。<br>
上記の場合、全てのSwordクラスが、Speciaクラスのインスタンスを参照することになる。<br>
つまり、Specialクラスのインスタンスに変更があると、Swordクラス全体に影響が出るということである。<br>

3. 他のパターンとの関連
  - Abstract Factoryパターン<br>
    Abstract tFactorパターンでPropertyパターンを利用することができる。<br>
    FactoryクラスにPrototypeを持っておき、それらのクローンを生成して返却することができる。<br>

  - Composit Decoratorパターン<br>
    これらのパターンでは複雑なインスタンスを生成することがある。<br>
    それをPropertyとして登録しておけば、簡単にインスタンスを生成して返却することができる。<br>

  - Commandパターン<br>
    Cammandパターンでは複数の命令を用意しておくことがある。<br>
    その命令をPrototypeとして持っておくことがある。<br>


4. サンプルコードの解説

  - Manager<br>
    Prototype（原型）を管理しておくクラス。<br>

  - Item<br>
    アイテムのProperty（原型）。これはJavaのインターフェースで作成する。<br>
    Itemは獲得（get）と利用する（use）ことができる、と定義している。<br>

  - Potion<br>
    回復アイテムのポーションを表すクラス。<br>

  - Sword<br>
    攻撃アイテムの剣を表すクラス。<br>

  - Main<br>
    Managerクラスを通して、Itemクラスのクローンを生成する。<br>

Propertyパターンでは、以下クラスを作成する。<br>

  - Client<br>
    Prototypeにクローン生成を依頼する。<br>
    Managerクラスがこれに該当する。<br>
    Prototypeを管理するManagerクラスを用意しておくことで、Prototypeの追加や削除などを行えるようになるため、便利である。<br>

  - Prototype<br>
    クローン生成のオンターフェースを定義しておく。<br>
    Itemインターフェースがこれに該当する。<br>

  - ConcreatePototype<br>
    クローン生成時の処理を実装する。<br>
    Potion、Swordクラスがこれに該当する。<br>

5. まとめ
  - Prototypeパターンでは、原型のインスタンスをコピーしてインスタンスを生成する。<br>
  - 少しだけ異なるオブジェクトを1つのクラスにまとめることで、保守性や拡張を高めることができる。<br>

